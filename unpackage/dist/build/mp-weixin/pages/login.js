(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login"],{"0d64":function(n,e,t){"use strict";(function(n){t("0146");o(t("66fd"));var e=o(t("61b0"));function o(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=t,n(e.default)}).call(this,t("543d")["createPage"])},"4e48":function(n,e,t){"use strict";var o=t("bdcd"),a=t.n(o);a.a},"61b0":function(n,e,t){"use strict";t.r(e);var o=t("9ccf"),a=t("9ee6");for(var c in a)"default"!==c&&function(n){t.d(e,n,(function(){return a[n]}))}(c);t("4e48");var i,r=t("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=u.exports},"89b2":function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(t("a34a")),a=t("ad93");function c(n){return n&&n.__esModule?n:{default:n}}function i(n,e,t,o,a,c,i){try{var r=n[c](i),u=r.value}catch(l){return void t(l)}r.done?e(u):Promise.resolve(u).then(o,a)}function r(n){return function(){var e=this,t=arguments;return new Promise((function(o,a){var c=n.apply(e,t);function r(n){i(c,o,a,r,u,"next",n)}function u(n){i(c,o,a,r,u,"throw",n)}r(void 0)}))}}var u={data:function(){return{codeUrl:"",captchaEnabled:!1,globalConfig:getApp().globalData.config,loginForm:{username:"admin",password:"admin123",code:"",uuid:""},wxLoginForm:{code:""}}},created:function(){this.getCode(),this.wxlogin()},methods:{handlePrivacy:function(){var n=this.globalConfig.appInfo.agreements[0];this.$tab.navigateTo("/pages/common/webview/index?title=".concat(n.title,"&url=").concat(n.url))},handleUserAgrement:function(){var n=this.globalConfig.appInfo.agreements[1];this.$tab.navigateTo("/pages/common/webview/index?title=".concat(n.title,"&url=").concat(n.url))},getCode:function(){var n=this;(0,a.getCodeImg)().then((function(e){n.captchaEnabled=void 0===n.captchaEnabled||e.captchaEnabled,n.captchaEnabled?(n.codeUrl="data:image/gif;base64,"+e.img,n.loginForm.uuid=e.uuid):n.loginForm.uuid=e.uuid}))},handleLogin:function(){var n=this;return r(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:""===n.loginForm.username?n.$modal.msgError("请输入您的账号"):""===n.loginForm.password?n.$modal.msgError("请输入您的密码"):""===n.loginForm.code&&n.captchaEnabled?n.$modal.msgError("请输入验证码"):(n.$modal.loading("登录中，请耐心等待..."),n.wxlogin());case 1:case"end":return e.stop()}}),e)})))()},pwdLogin:function(){var n=this;return r(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.$store.dispatch("Login",n.loginForm).then((function(){n.$modal.closeLoading(),n.loginSuccess()})).catch((function(){n.captchaEnabled&&n.getCode()}));case 1:case"end":return e.stop()}}),e)})))()},loginSuccess:function(n){var e=this;this.$store.dispatch("GetInfo").then((function(n){console.log("跳转"),e.$tab.reLaunch("/pages/index")}))},wxlogin:function(){var e=this;n.login({success:function(n){n.code?(e.wxLoginForm.code=n.code,e.$store.dispatch("WxLogin",e.wxLoginForm).then((function(){console.log("登陆成功"),e.$modal.closeLoading(),e.loginSuccess()})).catch((function(){e.captchaEnabled&&e.getCode()}))):console.log("登录失败！"+n.errMsg)}})}}};e.default=u}).call(this,t("543d")["default"])},"9ccf":function(n,e,t){"use strict";var o;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return c})),t.d(e,"a",(function(){return o}));var a=function(){var n=this,e=n.$createElement;n._self._c},c=[]},"9ee6":function(n,e,t){"use strict";t.r(e);var o=t("89b2"),a=t.n(o);for(var c in o)"default"!==c&&function(n){t.d(e,n,(function(){return o[n]}))}(c);e["default"]=a.a},bdcd:function(n,e,t){}},[["0d64","common/runtime","common/vendor"]]]);